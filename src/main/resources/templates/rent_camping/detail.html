<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{fragments/layout}">
<head>
    <title>SAVECAR - 캠핑카 렌트</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <!-- Style -->
    <link th:href="@{/css/camping.css}" rel="stylesheet">
    <link th:href="@{/css/camping_calendar.css}" rel="stylesheet">

    <script th:src="@{/js/campingcar.js}" defer></script>
    <script th:src="@{/js/europe_reserve.js}" defer ></script>
    <script>
        $(window).load(function() {
            let ulList = [...document.getElementsByClassName('header_camp_li')];
            let carType = document.getElementsByClassName('car_type')[0].id;
            let targetUl = ulList.find(ul => ul.dataset.id === carType);
            targetUl && targetUl.classList.add('active');
        });
    </script>
</head>

<body th:onload="getPriceData([[${imagesList[0].carName.carName}]])">
<div layout:fragment="content">
    <div th:replace="fragments/header_camp::headerFragment"></div>

    <!-- content whole wrapper-->
    <p class="car_type" th:id="${carType}" style="display: none;"></p>
    <p id="fullReturnDate" style="display: none;"></p>
    <!--mobile image-->
    <div class="row card white-card" id="mobile_carousel">
        <!-- Carousel container -->
        <div id="my-pics" class="carousel slide" data-ride="carousel" data-interval="false">
            <!-- Content -->
            <div class="carousel-inner" role="listbox">
                <div th:each="image, i : ${imagesList}" class="item" th:classappend="${i.index == 0 ? 'active' : ''}">
                    <img th:src="${image.url}" th:alt="${image.carName.carName}">
                </div>
            </div>
            <!-- Previous/Next controls -->
            <a class="left carousel-control" href="#my-pics" role="button" data-slide="prev">
                <span class="icon-prev" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="right carousel-control" href="#my-pics" role="button" data-slide="next">
                <span class="icon-next" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>

    <div id="wrapper" class="content pinside60 container">
        <!--  content body-->
        <div class="row" id="mainRow">
            <!-- left column -->
            <div id="left_column" class="col-lg-6 col-md-6 col-sm-12 col-xs-12 margin-bottom-60">
                <!--사진-->
                <div class="row card white-card" id="desktop_carousel">
                    <!-- Carousel container -->
                    <div id="desktop_img" class="carousel slide" data-ride="carousel" data-interval="false">
                        <div class="carousel-inner" role="listbox">
                            <div th:each="image, i : ${imagesList}" class="item main-item" th:data-title="${image.imageId}" th:classappend="${i.index == 0 ? 'active' : ''}">
                                <img th:src="${image.url}" th:alt="${image.carName.carName}">
                            </div>
                        </div>
                        <!-- Previous/Next controls -->
                        <a class="left carousel-control" href="#desktop_img" role="button" data-slide="prev">
                            <span class="icon-prev" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="right carousel-control" href="#desktop_img" role="button" data-slide="next">
                            <span class="icon-next" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                    <div class="small_image_List">
                        <div th:each="image, i : ${imagesList}" class="small_image_box" th:data-title="${image.imageId}">
                            <img th:src="${image.url}" th:alt="${image.carName.carName}">
                        </div>
                    </div>
                    <!--기본 정보-->
                    <table class="camping_info_table" style="margin-top: 30px;">
                        <tr>
                            <td>CAMPER 명</td>
                            <td>
                                <span th:text="${imagesList[0].carName.carName.toUpperCase()}"></span>
                                <span>VIP</span>
                            </td>
                        </tr>
                        <tr>
                            <td>연료 / 미션</td>
                            <td>
                                <span th:text="${explanation.fuel}"></span>
                                <span> / </span>
                                <span th:text="${explanation.gearBox}"></span>
                            </td>
                        </tr>
                        <tr>
                            <td>면허 종류</td>
                            <td th:text="${explanation.license}"></td>
                        </tr>
                        <tr>
                            <td>인원정보</td>
                            <td th:text="${explanation.personnel}"></td>
                        </tr>
                    </table>
                </div>
            </div>

            <!-- right column -->
            <div id="right_column" class="col-lg-6 col-md-6 col-sm-12 col-xs-12 margin-bottom-60 text-center">
                <div class="campingTitle">
                    <p style="text-align: left;">세이브카</p>
                    <h1 class="car_name_under_images">
                        <span th:text="${imagesList[0].carName.carName.toUpperCase()}"></span>
                        <span>Camper</span>
                    </h1>
                    <p class="title_price">
                        <span id="cheapestPrice" class="cheapestPrice"></span>
                        <span>원~</span>
                    </p>
                </div>
                <table class="camping_info_table" id="mobileInfoTable" style="margin: 20px 0;">
                    <tr>
                        <td>CAMPER 명</td>
                        <td>
                            <span th:text="${imagesList[0].carName.carName.toUpperCase()}"></span>
                            <span>VIP</span>
                        </td>
                    </tr>
                    <tr>
                        <td>연료 / 미션</td>
                        <td>
                            <span th:text="${explanation.fuel}"></span>
                            <span> / </span>
                            <span th:text="${explanation.gearBox}"></span>
                        </td>
                    </tr>
                    <tr>
                        <td>면허 종류</td>
                        <td th:text="${explanation.license}"></td>
                    </tr>
                    <tr>
                        <td>인원정보</td>
                        <td th:text="${explanation.personnel}"></td>
                    </tr>
                </table>
                <div class="camping_price_info">
                    <hr>
                    <select name="" id="displayPriceDay" class="select_display_price" th:onchange="displayPrice()">
                        <option value="">대여 기간</option>
                        <option value="1">1일권[선택 불가]</option>
                        <option th:each="num : ${#numbers.sequence(2,29)}" th:value="${num}" th:text="${num} + '일권'"></option>
                        <option value="30">한달권</option>
                    </select>
                    <select name="" id="displayPricePeak" class="select_display_price" th:onchange="displayPrice()">
                        <option value="">성수기/비성수기</option>
                        <option value="0">비성수기</option>
                        <option value="1">성수기</option>
                    </select>
                    <select name="" id="displayPriceExtraTime" class="select_display_price" th:onchange="displayPrice()" style="margin-bottom: 0;">
                        <option value="">추가시간 선택</option>
                        <option value="0">추가시간 없음</option>
                    </select>
                    <hr>
                    <div class="display_price_info">
                        <span>총 금액</span>
                        <div style="font-size: 26px;">
                            <span id="priceInfo"></span>
                            <span>원</span>
                        </div>
                    </div>
                    <button onclick="location.href='#counsel'" class="btn btn-primary" style="border: none; margin: 10px 0 20px 0; border-radius: 12px;">상담신청</button>
                    <div th:replace="/fragments/camping_explanations.html :: camper_price"></div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 margin-bottom-60 text-center whole_tab">
                <!--탭 메뉴-->
                <input id="tab_info" type="radio" name="tab_item" checked>
                <label class="tab_item" for="tab_info"><div onclick="location.href='#info'">상세정보</div></label>
                <input id="tab_review" type="radio" name="tab_item">
                <label class="tab_item" for="tab_review"><div onclick="location.href='#review'">리뷰(<span th:text="${#lists.size(reviewList)}">0</span>건)</div></label>
                <input id="tab_counsel" type="radio" name="tab_item">
                <label class="tab_item" for="tab_counsel"><div onclick="location.href='#counsel'">상담신청</div></label>
                <!--탭 내용-->
                <div class="card">
                    <div id="info">
                        <h1 class="tab-title" style="padding-top: 70px;">상세정보</h1>
                        <div th:unless="${imagesList[0].carName.carName == 'travel'}" class="tab_content_size" th:each="img, i:${campingCarMainTextList}">
                            <img th:src="${img.url}" th:alt="${img.carName.carName}">
                        </div>
                        <div th:if="${imagesList[0].carName.carName == 'travel'}" class="tab_content_size">
                            <!--기본옵션-->
                            <div class="row white-card" style="margin: 0;">
                                <h1 class="title">
                                    <i class="fas fa-circle"></i>
                                    CAMPER 기본 옵션
                                </h1>
                                <div th:replace="/fragments/camping_explanations.html :: travel_basic_option"></div>
                            </div>
                            <!--시설-->
                            <div class="row white-card" style="margin: 0;">
                                <h1 class="title">
                                    <i class="fas fa-circle"></i>
                                    CAMPER 시설
                                </h1>
                                <div th:replace="/fragments/camping_explanations.html :: travel_installation"></div>
                            </div>
                            <!--렌트정책-->
                            <div class="row white-card" style="margin: 0;">
                                <h1 class="title">
                                    <i class="far fa-circle"></i>
                                    CAMPER 렌트정책
                                </h1>
                                <div th:replace="/fragments/camping_explanations.html :: rent_policy"></div>
                            </div>
                            <!--보험사항-->
                            <div class="row white-card" style="margin: 0;">
                                <h1 class="title">
                                    <i class="far fa-circle"></i>
                                    CAMPER 보험사항
                                </h1>
                                <div th:replace="/fragments/camping_explanations.html :: rent_insurance"></div>
                            </div>
                            <!--이용규칙-->
                            <div class="row white-card" style="margin: 0;">
                                <h1 class="title">
                                    <i class="far fa-circle"></i>
                                    CAMPER 이용규칙
                                </h1>
                                <div th:replace="/fragments/camping_explanations.html :: rent_rule"></div>
                            </div>
                            <!--환불정책-->
                            <div class="row white-card" style="margin: 0;">
                                <h1 class="title">
                                    <i class="far fa-circle"></i>
                                    CAMPER 환불정책
                                </h1>
                                <div th:replace="/fragments/camping_explanations.html :: refund_policy"></div>
                            </div>
                        </div>
                    </div>
                    <div id="review" style="padding-top: 70px;">
                        <h1 class="tab-title">리뷰(<span th:text="${#lists.size(reviewList)}">0</span>건) </h1>
                        <p style="word-break: keep-all; text-align: left; color: dimgrey;">세이브카의 캠핑카를 이용하신 분들이 작성한 리뷰입니다.</p>
                        <a th:href="'/camping/review/registration/'+ ${imagesList[0].carName.carName}">
                            <button class="btn btn-primary" id="openReviewBtn">리뷰 쓰기</button>
                        </a>
                        <ul id="displayReviewBox">
                            <li th:if="${#lists.size(reviewList) == 0}" style="text-align: center; font-size: 16px; color: gray;">작성된 리뷰가 없습니다.</li>
                            <li th:if="${#lists.size(reviewList) != 0}" th:each="review, i : ${reviewList}" class="one_review" th:data-id="${review.reviewId}">
                                <div class="one_review_close" th:data-title="${review.reviewId}">
                                    <div class="review_text_box" th:classappend="${#lists.size(reviewImageList[i.index]) != 0 || review.video != ''} ? 'narrow' : 'wide'">
                                        <p>
                                            <button class="btn btn-primary" th:onclick="clickEditOrDeleteReview([[${review.reviewId}]], 'edit'); event.stopPropagation();">리뷰 수정하기</button>
                                            <button class="btn btn-danger" th:onclick="clickEditOrDeleteReview([[${review.reviewId}]], 'delete'); event.stopPropagation();">리뷰 삭제하기</button>
                                        </p>
                                        <div class="enter_password_form_for_edit" th:data-id="${review.reviewId}">
                                            <label class="control-label">리뷰 수정을 위한 비밀번호를 입력하세요.</label>
                                            <div style="display: flex;">
                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-key"></i></span>
                                                    <input type="password" class="form-control password_input_for_edit" th:data-id="${review.reviewId}" onclick="event.stopPropagation();">
                                                </div>
                                                <button class="btn btn-primary" th:onclick="checkValidPassword([[${imagesList[0].carName.carName}]], [[${review.reviewId}]], 'edit'); event.stopPropagation();">확인</button>
                                            </div>
                                        </div>
                                        <div class="enter_password_form_for_delete" th:data-id="${review.reviewId}">
                                            <label class="control-label">리뷰 삭제를 위한 비밀번호를 입력하세요.</label>
                                            <div style="display: flex;">
                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-key"></i></span>
                                                    <input type="password" class="form-control password_input_for_delete" th:data-id="${review.reviewId}" onclick="event.stopPropagation();">
                                                </div>
                                                <button class="btn btn-primary" th:onclick="checkValidPassword([[${imagesList[0].carName.carName}]], [[${review.reviewId}]], 'delete'); event.stopPropagation();">확인</button>
                                            </div>
                                        </div>
                                        <p>
                                            <span th:text="${review.reviewId}" style="display: none;" class="reviewId" th:data-id="${review.reviewId}"></span>
                                            <span th:text="${review.password}" style="display: none;" class="password" th:data-id="${review.reviewId}"></span>
                                            <span>닉네임 :</span>
                                            <span th:text="${review.nickName}" class="nickName" th:data-id="${review.reviewId}"></span>
                                            <span> | </span>
                                            <span>차량명 :</span>
                                            <span th:text="${review.carName.carName.toUpperCase()}"></span>
                                            <span th:text="${review.carName.carName}" class="carName" th:data-id="${review.reviewId}" style="display: none;"></span>
                                        </p>
                                        <p>
                                            <span>렌트 기간 :</span>
                                            <span th:text="${review.startDate}" class="startDate" th:data-id="${review.reviewId}"></span>
                                            <span>~</span>
                                            <span th:text="${review.endDate}" class="endDate" th:data-id="${review.reviewId}"></span>
                                        </p>
                                        <pre th:text="${#strings.abbreviate(review.text,150)}" class="review_text review_text_short"></pre>
                                        <pre th:text="${review.text}" class="review_text review_text_long text" th:data-id="${review.reviewId}"></pre>
                                        <button th:if="${#lists.size(reviewImageList[i.index]) != 0 || review.video != '' || review.text.length > 150}" th:onclick="'changeBtnText('+${review.reviewId}+', true)'" class="see_more_btn">
                                            <div th:data-id="${review.reviewId}" class="see_more_btn_open">
                                                <span class="see_more_button_text" th:data-id="${review.reviewId}">자세히 보기</span>
                                                <i class="fa fa-arrow-down" aria-hidden="true"></i>
                                            </div>
                                            <div th:data-id="${review.reviewId}" class="see_more_btn_close">
                                                <span class="see_more_button_text" th:data-id="${review.reviewId}">접기</span>
                                                <i class="fa fa-arrow-up" aria-hidden="true"></i>
                                            </div>
                                        </button>
                                    </div>
                                    <img th:if="${#lists.size(reviewImageList[i.index]) != 0}" th:src="${reviewImageList[i.index][0].imageUrl}" th:data-title="${review.reviewId}" class="review_small_image" alt="image">
                                    <video th:if="${#lists.size(reviewImageList[i.index]) == 0 && review.video != ''}" class="review_small_image video_part" controls preload="metadata">
                                        <source th:src="${review.video}">
                                    </video>
                                    <video style="display: none;">
                                        <source th:src="${review.video}" class="video">
                                    </video>
                                </div>
                                <p style="display: none;" th:text="${review.video}" th:data-id="${review.reviewId}" class="videoSrc"></p>
                                <div class="review_image_open" th:if="${#lists.size(reviewImageList[i.index]) != 0 || review.video != ''}" th:data-title="${review.reviewId}">
                                    <div class="image" th:each="img, i : ${reviewImageList[i.index]}">
                                        <img th:src="${img.imageUrl}" alt="image" th:data-id="${review.reviewId}" th:data-image-id="${img.imageId}" class="imgUrl">
                                    </div>
                                    <div class="video">
                                        <video th:if="${review.video != ''}" controls preload="metadata" class="video_real">
                                            <source th:src="${review.video}">
                                        </video>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div id="counsel" style="padding-top: 70px;">
                        <h1 class="tab-title">상담 신청하기</h1>
                        <p style="word-break: keep-all; text-align: left; color: dimgrey;">간단한 정보입력으로 상담 신청을 받아보세요.</p>
                        <div class="row">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <label id="rent-title" class="control-label" for="name" value="캠핑카"></label>
                                <div name="reservation_info" id="rentProduct" value="유럽">
                                    <div class="row">
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                            <div class="form-group has-feedback">
                                                <label class="control-label" for="name">이름</label>
                                                <div class="input-group"> <span class="input-group-addon"><i class="fa fa-user"></i></span>
                                                    <input type="text" class="form-control" id="reservation-detail-name" placeholder="성함을 입력해주세요.">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                            <div class="form-group has-feedback">
                                                <label class="control-label" for="phone">연락처</label>
                                                <div class="input-group"> <span class="input-group-addon"><i class="fa fa-phone"></i></span>
                                                    <input type="text" class="form-control" id="reservation-detail-phone" placeholder="연락처 ex) 010-0000-0000">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                            <div class="form-group has-feedback">
                                                <label class="control-label" for="textarea">요청 사항</label>
                                                <div class="input-group"> <span class="input-group-addon"><i class="fas fa-clipboard"></i></span>
                                                    <textarea class="form-control" id="reservation-detail-details" name="textarea" rows="6" placeholder="21세 이상 및 렌트기간, 문의사항 등을 입력하세요."></textarea>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                            <div class="form-group has-feedback">
                                                <p><font color="red" style="font-weight: bold;"> * 21세 이상은 요청 사항에 입력해주세요 </font></p>
                                                <p><font style="font-weight: bold;"> * 문의 : 010-5277-4113  /  1544-4680 </font></p>

                                                <br />
<!--                                                <p class="text-center"><input type="checkbox" id="agree" name="agree"> 개인정보 수집 및 이용에 동의합니다.</p>-->

                                                <div class="form-group has-feedback">
                                                    <p class="text-center"><label style="font-size: 1em; font-weight: initial;"><input type="checkbox" id="agree1" class="agree"> 개인정보 수집 및 이용에 동의합니다.</label></p>
                                                    <p class="text-center"><label style="font-size: 1em; font-weight: initial;"><input type="checkbox" id="agree2" class="agree"> 보험사 사고경력조회에 동의합니다.</label></p>
                                                    <p class="text-center"><label style="font-size: 1em; font-weight: initial;"><input type="checkbox" id="agree3" class="agree"> 보험사고 경력 조회시에 당사 규정에 따라 거부될 수 있음을 확인합니다.</label></p>
                                                    <p class="text-center"><label style="font-size: 1em; font-weight: initial;"><input type="checkbox" id="agree4" class="agree" onclick="check_all_box()"> 모두 동의</label></p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                            <div class="form-group text-center">
                                                <a class="btn1 btn1-default" style="cursor: pointer;" onclick="campingcar_rent_reservation()">상담신청 </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <button onclick="topFunction()" id="toTheTopBtn" title="Go to top">
            <i class="fa fa-arrow-up" aria-hidden="true"></i>
        </button>
    </div>
</div>
</body>
</html>