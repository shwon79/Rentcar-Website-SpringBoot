<!-- 관리자페이지 -->
<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <title>SAVECAR - 관리자 페이지</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <link th:href="@{/css/admin.css}" rel="stylesheet">
    <script th:src="@{/js/jquery.min.js}"></script>
    <script th:src="@{/js/admin.js}" defer></script>
    <script>
        $(window).load(function() {
            let morenReservationMenu = document.getElementById('morenReservationMenu');
            morenReservationMenu.classList.add('activeAdminMenu');
        });
    </script>
</head>
<body>
<div class="page_wrapper">
    <div id="logout_box"><a href="/admin/logout"><button id="logout">로그아웃</button></a></div>
    <div class="content_wrapper">

        <div th:replace="fragments/admin_menu::adminMenuFragment"></div>

        <div class="content_container">
            <div class="head_title" style="margin-top: 50px; text-align: center;">
                <h2>예약 신청 목록</h2>
            </div>
            <div id="mainTable">
                <table id="morenReservationTable">
                    <thead id="table_header">
                    <tr>
                        <th>예약 신청 시간</th>
                        <th>차량 번호</th>
                        <th>이름</th>
                        <th>전화번호</th>
                        <th>대여시작일</th>
                        <th>월 대여료</th>
                        <th>취소 및 확정</th>
                        <th>상세 페이지</th>
                        <th>목록에서 삭제</th>
                    </tr>
                    </thead>
                    <!-- pc -->
                    <tbody id="mainTable_tbody" th:each="reservation, iterStat : ${morenReservationList}">
                        <tr th:if="${reservation.reservationStatus == '-1' }" class="red-line" th:data-index="${reservation.id}">
                            <td scope="col" th:text="${#strings.arraySplit(reservation.createdDate, 'T')[0]+' '+#strings.arraySplit(reservation.createdDate, 'T')[1]}" ></td>
                            <td scope="col" class="carNo" th:text="${reservation.carNo}" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="reservationName" th:text="${reservation.reservationName}" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="reservationPhone" th:text="${reservation.reservationPhone}" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="reservationDate" th:text="${reservation.reservationDate}" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="reservationTime" th:text="${reservation.reservationTime}" style="display: none;" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="reservationAddress" th:text="${reservation.Address}" style="display: none;" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="reservationAddressDetail" th:text="${reservation.AddressDetail}" style="display: none;" th:data-index="${reservation.id}"></td>
                            <td scope="col" th:text="${reservation.carAmountTotal}" class="number"></td>
                            <td scope="col" class="reservationId" th:text="${reservation.id}" style="display: none;" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="rentTerm" th:text="${reservation.rentTerm}" style="display: none;" th:data-index="${reservation.id}"></td>
                            <td></td>
                            <td>
                                <a th:href="'/admin/moren/reservation/detail/' + ${reservation.id}">
                                    <button style="width: 100%;">상세 페이지</button>
                                </a>
                            </td>
                            <td class="no-line-column">
                                <button style="width: 100%;" th:data-index="${reservation.id}" class="reservation-completely-delete-btn">삭제</button>
                            </td>
                        </tr>
                        <tr th:if="${reservation.reservationStatus == '0' }" th:data-index="${reservation.id}">
                            <td scope="col" th:text="${#strings.arraySplit(reservation.createdDate, 'T')[0]+' '+#strings.arraySplit(reservation.createdDate, 'T')[1]}" ></td>
                            <td scope="col" class="carNo" th:text="${reservation.carNo}" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="reservationName" th:text="${reservation.reservationName}" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="reservationPhone" th:text="${reservation.reservationPhone}" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="reservationDate" th:text="${reservation.reservationDate}" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="reservationTime" th:text="${reservation.reservationTime}" style="display: none;" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="reservationAddress" th:text="${reservation.Address}" style="display: none;" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="reservationAddressDetail" th:text="${reservation.AddressDetail}" style="display: none;" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="number" th:text="${reservation.carAmountTotal}"></td>
                            <td scope="col" class="reservationId" th:text="${reservation.id}" style="display: none;" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="rentTerm" th:text="${reservation.rentTerm}" style="display: none;" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="costPerKm" th:text="${reservation.costPerKm}" style="display: none;" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="carAmountTotal" th:text="${reservation.carAmountTotal}" style="display: none;" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="carDeposit" th:text="${reservation.carDeposit}" style="display: none;" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="reservationDetails" th:text="${reservation.reservationDetails}" style="display: none;" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="kilometer" th:text="${reservation.kilometer}" style="display: none;" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="reservationAge" th:text="${reservation.reservationAge}" style="display: none;" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="reservationGuarantee" th:text="${reservation.reservationGuarantee}" style="display: none;" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="carCode" th:text="${reservation.carCode}" style="display: none;" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="pickupPlace" th:text="${reservation.pickupPlace}" style="display: none;" th:data-index="${reservation.id}"></td>
                            <td>
                                <span><button class="reservation-delete-btn" th:data-index="${reservation.id}">취소</button></span>
                                <span><button class="reservation-confirm-btn" th:data-index="${reservation.id}">확정</button></span>
                            </td>
                            <td>
                                <a th:href="'/admin/moren/reservation/detail/' + ${reservation.id}">
                                    <button style="width: 100%;">상세 페이지</button>
                                </a>
                            </td>
                        </tr>
                        <tr th:if="${reservation.reservationStatus == '1' }" class="blue-line" th:data-index="${reservation.id}">
                            <td scope="col" th:text="${#strings.arraySplit(reservation.createdDate, 'T')[0]+' '+#strings.arraySplit(reservation.createdDate, 'T')[1]}" ></td>
                            <td scope="col" class="carNo" th:text="${reservation.carNo}" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="reservationName" th:text="${reservation.reservationName}" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="reservationPhone" th:text="${reservation.reservationPhone}" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="reservationDate" th:text="${reservation.reservationDate}" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="reservationTime" th:text="${reservation.reservationTime}" style="display: none;" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="reservationAddress" th:text="${reservation.Address}" style="display: none;" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="reservationAddressDetail" th:text="${reservation.AddressDetail}" style="display: none;" th:data-index="${reservation.id}"></td>
                            <td scope="col" th:text="${reservation.carAmountTotal}"></td>
                            <td scope="col" class="reservationId" th:text="${reservation.id}" style="display: none;" th:data-index="${reservation.id}"></td>
                            <td scope="col" class="rentTerm" th:text="${reservation.rentTerm}" style="display: none;" th:data-index="${reservation.id}"></td>
                            <td></td>
                            <td>
                                <a th:href="'/admin/moren/reservation/detail/' + ${reservation.id}">
                                    <button style="width: 100%;">상세 페이지</button>
                                </a>
                            </td>
                            <td class="no-line-column">
                                <button style="width: 100%;" th:data-index="${reservation.id}" class="reservation-completely-delete-btn">삭제</button>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <!-- Mobile --->
                <div id="morenReservationCard">
                    <div class="card" th:each="reservation, iterStat : ${morenReservationList}">
                        <p>예약 신청 시간: <span th:text="${#strings.arraySplit(reservation.createdDate, 'T')[0]+' '+#strings.arraySplit(reservation.createdDate, 'T')[1]}"></span></p>
                        <p>차량 번호: <span th:text="${reservation.carNo}"></span></p>
                        <p>이름: <span th:text="${reservation.reservationName}"></span></p>
                        <p>전화번호: <span th:text="${reservation.reservationPhone}"></span></p>
                        <p>대여시작일: <span th:text="${reservation.reservationDate}"></span></p>
                        <p>월 대여료: <span class="number" th:text="${reservation.carAmountTotal}"></span><span>원</span></p>
                        <p th:if="${reservation.reservationStatus == '0'}" style="display: flex; justify-content: space-between;">
                            <span style="width: 49%;"><button class="reservation-delete-btn" th:data-index="${reservation.id}">취소</button></span>
                            <span style="width: 49%;"><button class="reservation-confirm-btn" th:data-index="${reservation.id}">확정</button></span>
                        </p>
                        <p th:if="${reservation.reservationStatus == '1'}" style="display: flex; justify-content: space-between;">
                            <span style="width: 100%; text-align: center; color: darkblue; margin-top: 5px;">이 예약 신청은 확정되었습니다.</span>
                        </p>
                        <p th:if="${reservation.reservationStatus == '-1'}" style="display: flex; justify-content: space-between;">
                            <span style="width: 100%; text-align: center; color: red; margin-top: 5px;">이 예약 신청은 취소되었습니다.</span>
                        </p>
                        <p>
                            <a th:href="'/admin/moren/reservation/detail/' + ${reservation.id}">
                                <button style="width: 100%;">상세 페이지</button>
                            </a>
                        </p>
                        <p th:unless="${reservation.reservationStatus == '0'}">
                            <button style="width: 100%;" th:data-index="${reservation.id}" class="reservation-completely-delete-btn">목록에서 삭제</button>
                        </p>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

</body>

</html>